<!DOCTYPE html>
<html>
	<body>
		<title>2E0KGG PSK Reporter MQTT Demo Client</title>
		<h1>2E0KGG PSK Reporter MQTT Demo Client</h1>

		<form action=".">
			<input type="text" placeholder="Callsign" name="callsign" />
			<input type="submit" text="Go" />
		</form>

		<br>

		<table>
			<tr><th>RX</th><th>TX</th>
			<tr>
				<td id="rxFeed"></td>
				<td id="txFeed"></td>
			</tr>
		</table>

		<footer>
			<ul>
				<li><a href="https://github.com/doismellburning/psychic-octo-telegram">GitHub</a></li>
				<li>By <a href="https://www.doismellburning.co.uk/">Kristian Glass</a> - <a href="https://radio.doismellburning.co.uk/">2E0KGG</a></li>
				<li>With thanks to <a href="https://m0lte.uk/">Tom M0LTE</a> for the <a href="https://pskreporter.info/">PSK Reporter</a> MQTT feed</li>
			</ul>
		</footer>

		<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
	<!--
		<script src="https://unpkg.com/mqtt@4.3.7/dist/mqtt.js"></script>
	-->
		<script>
			console.log(mqtt)
		</script>
		<script src="/pot.js"></script>
		<script>
			const urlParams = new URLSearchParams(window.location.search);
			var callsign = urlParams.get('callsign');
			if (!callsign) {
				callsign = "2E0KGG"
			}

			var client = connectAndSubscribeAndDoStuff(callsign, updateFeedOnMessage)
		</script>
	</body>
</html>
